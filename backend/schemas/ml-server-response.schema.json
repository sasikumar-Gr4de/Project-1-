{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "GR4DE ML Server Response Schema",
  "description": "Complete response structure from ML Server when analyzing a player's match performance",
  "type": "object",
  "required": ["status", "timestamp", "data"],
  "properties": {
    "status": {
      "type": "string",
      "enum": ["success", "partial_success", "error"],
      "description": "Processing status"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of response"
    },
    "processing_time_ms": {
      "type": "number",
      "description": "Total processing time in milliseconds"
    },
    "data": {
      "type": "object",
      "required": ["job_id", "player_data_id", "player_id", "match_metadata", "scoring_metrics"],
      "properties": {
        "job_id": {
          "type": "string",
          "format": "uuid",
          "description": "Processing queue job ID"
        },
        "player_data_id": {
          "type": "string",
          "format": "uuid",
          "description": "Player data record ID"
        },
        "player_id": {
          "type": "string",
          "format": "uuid",
          "description": "Player ID"
        },
        "match_metadata": {
          "type": "object",
          "properties": {
            "match_id": {"type": "string"},
            "match_date": {"type": "string", "format": "date"},
            "competition": {"type": "string"},
            "opponent": {"type": "string"},
            "venue": {"type": "string", "enum": ["home", "away", "neutral"]},
            "result": {"type": "string", "enum": ["win", "loss", "draw"]},
            "final_score": {"type": "string"},
            "minutes_played": {"type": "number"},
            "position_played": {"type": "string"},
            "formation": {"type": "string"},
            "jersey_number": {"type": "integer"}
          }
        },
        "scoring_metrics": {
          "type": "object",
          "required": ["gr4de_score", "pillars", "tempo"],
          "properties": {
            "overall_score": {"type": "number", "minimum": 0, "maximum": 100},
            "gr4de_score": {"type": "number", "minimum": 0, "maximum": 100},
            "confidence_interval": {
              "type": "object",
              "properties": {
                "lower": {"type": "number"},
                "upper": {"type": "number"},
                "confidence_level": {"type": "number", "default": 0.95}
              }
            },
            "pillars": {
              "type": "object",
              "properties": {
                "technical": {"type": "number", "minimum": 0, "maximum": 100},
                "tactical": {"type": "number", "minimum": 0, "maximum": 100},
                "physical": {"type": "number", "minimum": 0, "maximum": 100},
                "mental": {"type": "number", "minimum": 0, "maximum": 100}
              }
            },
            "tempo": {
              "type": "object",
              "properties": {
                "index": {"type": "number", "minimum": 0, "maximum": 100},
                "consistency": {"type": "number", "minimum": 0, "maximum": 100}
              }
            }
          }
        },
        "technical_metrics": {"type": "object"},
        "tactical_metrics": {"type": "object"},
        "physical_metrics": {"type": "object"},
        "mental_metrics": {"type": "object"},
        "tempo_results": {"type": "object"},
        "position_specific_metrics": {"type": "object"},
        "benchmark_comparison": {"type": "object"},
        "event_array": {"type": "array"},
        "insights": {"type": "array"},
        "raw_file_urls": {
          "type": "object",
          "properties": {
            "video_annotated": {"type": "string", "format": "uri"},
            "events_csv": {"type": "string", "format": "uri"},
            "detections_csv": {"type": "string", "format": "uri"},
            "heatmap_image": {"type": "string", "format": "uri"}
          }
        }
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "model_version": {"type": "string"},
        "pipeline_version": {"type": "string"},
        "processing_pipeline": {"type": "string"},
        "confidence_score": {"type": "number", "minimum": 0, "maximum": 1},
        "data_quality": {"type": "object"}
      }
    }
  }
}
